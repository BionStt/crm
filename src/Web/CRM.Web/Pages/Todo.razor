@page "/todo"
@using CRM.Web.Data

<h1 style="font-style:@_headingFontStyle">Todo (@todos.Count(todo => !todo.IsDone))</h1>

@*<ul>
    @foreach (var todo in todos)
    {
        <li>
            <input type="checkbox" @bind="todo.IsDone" />
            <input @bind="todo.Title" />
        </li>
    }
</ul>*@

<EditForm Model="@address" OnValidSubmit="@OnValidSubmit" OnInvalidSubmit="@OnInvalidSubmit">
    <DataAnnotationsValidator />
    @*<ValidationSummary />*@
    <p>
        Name: <InputText @bind-Value="address.Country" />
        <ValidationMessage For="@(() => address.Country)" />
    </p>

    <button type="submit">Submit</button>
</EditForm>

<input placeholder="Something todo" @bind="newTodo" />
<button @onclick="AddTodo">Add Todo</button>

@code {
    Address address = new Address();

    private string _headingFontStyle = "italic";

    private IList<TodoItem> todos = new List<TodoItem>();
    private string newTodo;

    private void AddTodo()
    {
        if (!string.IsNullOrEmpty(newTodo))
        {
            todos.Add(new TodoItem
            {
                Title = newTodo
            });
            newTodo = string.Empty;
        }
    }

    string validationStatus = "";

    void OnValidSubmit()
    {
        validationStatus = "Success!";
    }

    void OnInvalidSubmit()
    {
        validationStatus = "Failed!";
    }
}
